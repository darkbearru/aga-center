import{f as x,o as l,c as m,a,_ as v,p as S,e as q,r as C,u as s,b as o,w as d,s as j,q as K,C as Q,g as F,k as O,D as B,E as U,d as L,G as W,n as X,F as Y,H as Z,A as ee}from"./entry.676b6978.js";import{_ as w,a as T,F as oe,b as H,s as P,f as te}from"./Popup.vue.9460c2dc.js";import z from"./icon-login.27a057d4.js";import{u as G}from"./useAuth.ec594533.js";import{_ as se}from"./logo-white.ee8f2d3d.js";import{u as ie,_ as ae}from"./nuxt-img.ced04cb3.js";import ne from"./icon-search.0c9ae07f.js";import"./nuxt-link.6c446591.js";import"./icon-close.c49ccc36.js";import"./cookie.5691c368.js";import"./ssr.02200a8e.js";import"./vue.f36acd1f.ee4e5a38.js";const le=""+globalThis.__publicAssetsURL("images/logo-color.svg"),re={class:"order-1 w-6/12 md:w-2/12 h-14 md:h-full md:max-w-[170px] md:ml-[17px]"},ce=["href"],de=a("img",{src:le,class:"w-auto h-14 md:h-28",alt:"АГА. Тур-центр. Логотип"},null,-1),_e=[de],me=x({__name:"LogoColor",props:{href:String},setup(t){return(n,p)=>(l(),m("div",re,[a("a",{href:t.href},_e,8,ce)]))}});const ue={},pe=t=>(S("data-v-82518c23"),t=t(),q(),t),fe={class:"flex grow-1 items-center justify-center order-3 md:order-2 w-full"},he=pe(()=>a("ul",{class:"flex justify-center w-full md:w-auto"},[a("li",null,"Новости"),a("li",null,"Отдых"),a("li",null,"Работа")],-1)),ge=[he];function ve(t,n){return l(),m("nav",fe,ge)}const be=v(ue,[["render",ve],["__scopeId","data-v-82518c23"]]),J=t=>(S("data-v-58dbf842"),t=t(),q(),t),xe={class:"flex order-2 md:order-3 items-center justify-end md:justify-end w-6/12 md:w-2/12 pr-8"},we={key:0},ye=J(()=>a("span",{class:"hidden md:inline"},"Войти",-1)),$e={key:1},ke=J(()=>a("span",{class:"hidden md:inline"},"Личный кабинет",-1)),Ce=x({__name:"Login",props:{loggedUser:{type:Boolean,default:!1}},emits:["showPopup"],setup(t,{expose:n,emit:p}){n({hidePopup:$,update:E});const h=C(t.loggedUser),y=p,g=C(!1);function b(){V(),y("showPopup")}function $(){V()}function V(){g.value=!g.value}function E(I){h.value=I}return(I,N)=>(l(),m("div",xe,[s(h)?(l(),m("div",$e,[o(w,{class:"btn-main",to:"/client",title:"Личный кабинет"},{default:d(()=>[o(s(z),{filled:""}),ke]),_:1})])):(l(),m("div",we,[o(w,{class:j(["btn-main",s(g)?"hide":""]),title:"Войти",onClick:b},{default:d(()=>[o(s(z),{filled:""}),ye]),_:1},8,["class"])]))]))}});const Ve=v(Ce,[["__scopeId","data-v-58dbf842"]]),Ie={},Le={class:"flex justify-stretch gap-4 mt-4"};function Pe(t,n){return l(),m("div",Le,[K(t.$slots,"default")])}const M=v(Ie,[["render",Pe]]),Se={},qe={class:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"white"},Ee=a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Fe=a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Be=[Ee,Fe];function Ue(t,n){return l(),m("svg",qe,Be)}const je=v(Se,[["render",Ue]]),ze={class:"absolute flex items-center justify-center left-0 top-0 w-full h-full z-30 bg-white/60 backdrop-blur-[1px]"},D=x({__name:"LoadingBg",setup(t){return(n,p)=>(l(),m("div",ze,[o(je,{class:"w-8 h-8 block text-main"})]))}}),Re=x({__name:"LoginPopup",emits:["hide-popup"],setup(t,{expose:n,emit:p}){const e=Q({email:"",code:"",isReg:!1,regEmail:"",regCode:"",regFIO:"",mode:!1,classList:"",show:!1,loading:!1}),h=G();n({show:g,hide:b});const y=p;function g(){e.show=!0}function b(){e.show=!1,e.isReg=!1,e.classList="",e.mode=!1,y("hide-popup")}const $=()=>{e.isReg=!e.isReg,e.classList=e.isReg?"is-registration":"",e.mode=!1},V=()=>{H("login_form")},E=()=>{H("registration_form")},I=async()=>{var i,_,c,k;if(!e.mode){e.loading=!0;const r=await h.login(e.email);r!=null&&r.errors&&(console.log(r.errors),P("login_form",(i=r.errors)!=null&&i.other?[(_=r.errors)==null?void 0:_.other]:[],r.errors)),e.loading=!1,!(r!=null&&r.errors)&&(r!=null&&r.user)&&(e.mode=!0);return}e.loading=!0;const f=await h.login(e.email,e.code);f!=null&&f.errors&&P("login_form",(c=f.errors)!=null&&c.other?[(k=f.errors)==null?void 0:k.other]:[],f.errors),e.loading=!1,f!=null&&f.user&&(b(),await A())},N=async f=>{var _,c,k,r;if(!e.mode){e.loading=!0;const u=await h.register(e.regEmail,e.regFIO,e.regCode);u!=null&&u.errors&&(console.log(u.errors),P("registration_form",(_=u.errors)!=null&&_.other?[(c=u.errors)==null?void 0:c.other]:[],u.errors)),e.loading=!1,!(u!=null&&u.errors)&&(u!=null&&u.user)&&(e.mode=!0);return}e.loading=!0;const i=await h.register(e.regEmail,e.regFIO,e.regCode);i!=null&&i.errors&&P("registration_form",(k=i.errors)!=null&&k.other?[(r=i.errors)==null?void 0:r.other]:[],i.errors),e.loading=!1,i!=null&&i.user&&(b(),await A())},A=async()=>{await W().push({path:"/client"})};return(f,i)=>{const _=te;return l(),F(s(oe),{"config-file":"true"},{default:d(()=>[a("div",{class:j(["login-popup-container",s(e).show?"show ":""])},[a("div",{class:j(["login-popup",s(e).classList])},[o(T,{title:"Авторизация",class:"w-full bg-gray-200/60 pb-6 shadow-md",onClose:b},{default:d(()=>[o(_,{id:"login_form",type:"form","submit-label":"Войти",config:{validationVisibility:"submit"},actions:!1,onSubmit:I},{default:d(()=>[o(_,{type:"email",id:"email",name:"email",label:"E-mail",placeholder:"E-mail адрес",modelValue:s(e).email,"onUpdate:modelValue":i[0]||(i[0]=c=>s(e).email=c),validation:"required|email","validation-visibility":"submit","validation-messages":{not_exists:"Указанный пользователь не существует",email:"Введённый текст не соответствует формату Email",required:"Необходимо указать ваш email"}},null,8,["modelValue"]),s(e).mode?(l(),F(_,{key:0,type:"text",id:"confirm_code",name:"confirm_code",class:"confirm_code",label:"Код",placeholder:"Код подтверждения",modelValue:s(e).code,"onUpdate:modelValue":i[1]||(i[1]=c=>s(e).code=c),validation:"required|length:8|contains_numeric","validation-visibility":"submit","validation-messages":{code_not_exists:"Введён неверный код",length:"Длина кода должна быть 8 символов",required:"Необходимо указать ваш email",contains_numeric:"Код должен состоять из цифр"}},null,8,["modelValue"])):O("",!0),o(M,{class:"h-12"},{default:d(()=>[B(o(w,{class:"flex items-center justify-center grow bg-transparent border border-main text-main hover:text-white hover:bg-main hover:border-main group disabled:opacity-50 disabled:hover:bg-transparent disabled:hover:border-main-light-2 disabled:hover:text-main-light-2",title:"Зарегистрироваться",onClick:$},{default:d(()=>[L(" Регистрация ")]),_:1},512),[[U,!s(e).mode]]),o(w,{class:"flex items-center border border-second bg-second text-white hover:border-main hover:bg-main px-6",title:"Войти",onClick:V},{default:d(()=>[o(s(z),{class:"w-6 h-6 block text-white pr-1",filled:""}),L(" Войти ")]),_:1})]),_:1})]),_:1}),B(o(D,null,null,512),[[U,s(e).loading]])]),_:1}),o(T,{title:"Регистрация",class:"w-full bg-gray-200/60 pb-6 shadow-md",onClose:b},{default:d(()=>[o(_,{id:"registration_form",type:"form","submit-label":"Зарегистрироваться",config:{validationVisibility:"submit"},actions:!1,onSubmit:N},{default:d(()=>[o(_,{type:"email",name:"email",id:"email",label:"E-mail",placeholder:"E-mail адрес",modelValue:s(e).regEmail,"onUpdate:modelValue":i[2]||(i[2]=c=>s(e).regEmail=c),validation:"required|email","validation-visibility":"submit","validation-messages":{user_exists:"Указанный пользователь уже существует",email:"Введённый текст не соответствует формату Email",required:"Необходимо указать ваш email"}},null,8,["modelValue"]),o(_,{type:"text",name:"fio",id:"fio",label:"ФИО",placeholder:"ФИО",modelValue:s(e).regFIO,"onUpdate:modelValue":i[3]||(i[3]=c=>s(e).regFIO=c),validation:"required|length:5|contains_alpha_spaces","validation-visibility":"submit","validation-messages":{length:"Длина ФИО должна быть не менее 5 символов",required:"Необходимо указать ФИО",contains_alpha_spaces:"ФИО может состоять только из букв и пробелов"}},null,8,["modelValue"]),s(e).mode?(l(),F(_,{key:0,type:"text",id:"code",name:"confirm_code",class:"confirm_code",label:"Код",placeholder:"Код подтверждения",modelValue:s(e).regCode,"onUpdate:modelValue":i[4]||(i[4]=c=>s(e).regCode=c),validation:"required|length:8|contains_numeric","validation-visibility":"submit","validation-messages":{code_not_exists:"Введён неверный код",length:"Длина кода должна быть 8 символов",required:"Необходимо указать ваш email",contains_numeric:"Код должен состоять из цифр"}},null,8,["modelValue"])):O("",!0),o(_,{type:"checkbox",name:"confirm",id:"confirm",checked:!0,label:"Согласен с правилами сайта",validation:"required","validation-messages":{required:"Без согласия с правилами сайта регистрация невозможна"}}),o(M,{class:"h-12"},{default:d(()=>[o(w,{class:"flex items-center justify-center grow bg-transparent border border-main text-main hover:text-white hover:bg-main hover:border-main group",title:"Войти",onClick:$},{default:d(()=>[L(" Авторизация ")]),_:1}),o(w,{class:"flex items-center border border-second bg-second text-white hover:border-main hover:bg-main px-6",title:"Зарегистрироваться",onClick:E},{default:d(()=>[L(" Зарегистрироваться ")]),_:1})]),_:1})]),_:1}),B(o(D,null,null,512),[[U,s(e).loading]])]),_:1})],2)],2)]),_:1})}}});const Ne=v(Re,[["__scopeId","data-v-26558e11"]]),Ae={class:"flex flex-wrap md:flex-nowrap top-0 md:h-44 p-4 md:p-0 md:pt-[22px] bg-none md:bg-[url('/images/clouds.svg')] bg-repeat-x bg-left-top md:sticky z-30"},Oe=x({__name:"Header",setup(t){const n=C(),p=C(),e=C(void 0),h=()=>{n.value.show()},y=()=>{p.value.hidePopup()},g=G();return X(async()=>{g.check().then(()=>{e.value=g.user,p.value.update(!!g.user)})}),(b,$)=>(l(),m(Y,null,[a("header",Ae,[o(me,{class:"md:h-20",href:"/"}),o(be,{class:"md:h-20"}),o(Ve,{class:"md:h-20",onShowPopup:h,ref_key:"loginBtn",ref:p,loggedUser:!!s(e)},null,8,["loggedUser"])]),o(Ne,{onHidePopup:y,ref_key:"loginPopup",ref:n},null,512)],64))}});const Te={},He={class:"bg-second"},Me=Z('<div class="relative" data-v-f2a8e041><div class="clouds" data-v-f2a8e041><div class="forest" data-v-f2a8e041></div></div></div><div class="footer" data-v-f2a8e041><div class="logo" data-v-f2a8e041><img src="'+se+'" alt="АГА. Тур-центр. Логотип" data-v-f2a8e041></div></div>',2);function De(t,n){return l(),m("footer",He,[K(t.$slots,"default",{},void 0,!0),Me])}const Ke=v(Te,[["render",De],["__scopeId","data-v-f2a8e041"]]),R=t=>(S("data-v-06d05780"),t=t(),q(),t),Ge={class:"search-block-container"},Je={class:"search-block"},Qe=R(()=>a("nav",null,[a("a",{href:"",class:"selected"},"Отдых"),a("a",{href:""},"Бизнес")],-1)),We={class:"flex sm:gap-x-4 order-1 sm:order-2 w-full"},Xe=R(()=>a("input",{type:"text"},null,-1)),Ye=R(()=>a("span",null,"Найти",-1)),Ze=x({__name:"SearchBlock",setup(t){return(n,p)=>(l(),m("div",Ge,[a("div",Je,[Qe,a("div",We,[Xe,o(w,{class:"btn-main"},{default:d(()=>[o(s(ne),{filled:""}),Ye]),_:1})])])]))}});const eo=v(Ze,[["__scopeId","data-v-06d05780"]]),oo=t=>(S("data-v-6c46818e"),t=t(),q(),t),to={class:"relative h-[200px] md:top-[-100px] md:h-[550px]"},so={class:"relative h-[200px] md:h-[650px] overflow-x-hidden"},io=oo(()=>a("div",{class:"title-footer"},null,-1)),ao=x({__name:"TitlePicture",setup(t){const n=ie();return(p,e)=>{const h=ae;return l(),m("div",to,[a("div",so,[o(h,{class:"relative h-[200px] lg:h-[630px] left-0 z-0 max-w-none",src:"/images/hills_and_sky.jpg",aspect:"42/9",format:"webp",quality:"85",sizes:"xs:1400 sm:2800 md:3733 lg:4667 xl:5880",loading:"lazy",placeholder:s(n)("/images/hills_and_sky.jpg",{fit:"contain",format:"webp",height:50,blur:3,quality:50})},null,8,["placeholder"]),io,o(eo)])])}}});const no=v(ao,[["__scopeId","data-v-6c46818e"]]);const lo={},ro={class:"logos-list"};function co(t,n){return l(),m("div",ro)}const _o=v(lo,[["render",co],["__scopeId","data-v-cbd0a397"]]),mo={class:"bg-white"},Co=x({__name:"default",setup(t){return(n,p)=>{const e=ee;return l(),m("div",mo,[o(Oe),o(no),o(e),o(Ke,null,{default:d(()=>[o(_o)]),_:1})])}}});export{Co as default};
